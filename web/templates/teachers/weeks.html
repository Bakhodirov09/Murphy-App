<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teacher Dashboard â€” Static HTML/CSS</title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f5f7fb;
      --panel:#ffffff;
      --muted:#9aa4b2;
      --accent:#6c5ce7;
      --accent-2:#00b894;
      --danger:#ff7675;
      --card-shadow: 0 6px 18px rgba(34,40,49,0.06);
      --glass: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.75));
      --radius:12px;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    /* Days Toggle */
    .days-toggle {
        width: 100%;
        display: flex;
        justify-content: center;
        margin: 20px 0 10px;
    }

    .day-btn {
        background: transparent;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        font-size: 14px;
        cursor: pointer;
        font-weight: 500;
        color: #555;
    }

    .day-btn.active {
        background: #FFD400;
        color: #000;
        font-weight: 600;
    }

    /* Groups Tabs */
    .groups-tabs {
        width: 100%;
        background: #f7f7f7;
        padding: 12px;
        border-radius: 14px;
        display: flex;
        gap: 10px;
        overflow-x: auto;
        white-space: nowrap;
    }

    .group-tab {
        background: #ffffff;
        padding: 15px 20px;
        border-radius: 14px;
        min-width: 180px;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        border: 1px solid #ececec;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }

    .group-tab.active {
        border-color: #ffd400;
        background: #fffdf3;
    }

    .group-tab .icon {
        font-size: 18px;
        opacity: 0.8;
    }

    .g-title {
        font-size: 14px;
        font-weight: 600;
        margin-top: 3px;
    }

    .g-level {
        font-size: 12px;
        color: #777;
        margin-top: -2px;
    }

    .alert {
        color: red;
        font-size: 14px;
        margin-top: 5px;
    }

    /* Scrollbar hidden (iOS style) */
    .groups-tabs::-webkit-scrollbar {
        display: none;
    }


    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:#1f2d3d;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-size:14px;
      line-height:1.3;
    }

    /* Layout */
    .app{
      display:flex;
      min-height:100vh;
      gap:24px;
      padding:28px;
    }

    /* Sidebar */
    .sidebar{
      width:260px;
      background:linear-gradient(180deg,#0f1724,#0b1220);
      color:#dbe7ff;
      border-radius:16px;
      padding:22px;
      box-shadow:0 10px 30px rgba(2,6,23,0.3);
      flex-shrink:0;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    .logo{display:flex;align-items:center;gap:12px}
    .logo .dot{width:38px;height:38px;border-radius:50%;background:linear-gradient(45deg,#6c5ce7,#00b894);display:flex;align-items:center;justify-content:center;font-weight:700}
    .logo h1{font-size:16px;margin:0}

    .nav{display:flex;flex-direction:column;gap:8px;margin-top:6px}
    .nav a{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;color:rgba(255,255,255,0.85);text-decoration:none}
    .nav a.active{background:rgba(255,255,255,0.06)}

    .sidebar .spacer{flex:1}
    .logout{display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02)}

    /* Main content */
    .main{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:16px
    }
    .search{display:flex;align-items:center;gap:10px;background:var(--panel);padding:10px;border-radius:12px;box-shadow:var(--card-shadow);min-width:320px}
    .search input{border:0;outline:0;background:transparent}

    .profile{display:flex;align-items:center;margin-left:auto;}

    /* Stats cards */
    .stats-row{display:flex;gap:14px}
    .stat-card{
      background:var(--panel);
      padding:14px 16px;
      border-radius:12px;
      box-shadow:var(--card-shadow);
      min-width:110px;
      display:flex;flex-direction:column;gap:6px;align-items:flex-start
    }
    .stat-card .num{font-size:20px;font-weight:700}
    .stat-card .label{color:var(--muted);font-size:12px}
    .avatar{margin-left: 20px;width:44px;height:44px;border-radius:50%;background:linear-gradient(45deg,#ffd166,#ef476f);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}

    /* Controls */
    .controls{display:flex;gap:12px;align-items:center}
    .btn{padding:10px 12px;border-radius:10px;background:var(--accent);color:white;border:0;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(108,92,231,0.12)}

    /* Summary cards */
    .summary{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    .summary .card{background:var(--panel);padding:14px;border-radius:12px;box-shadow:var(--card-shadow);display:flex;flex-direction:column;gap:8px}
    .summary small{color:var(--muted)}

    /* Table / schedule */
    .panel{background:var(--panel);padding:14px;border-radius:12px;box-shadow:var(--card-shadow);}

    .weeks {
        padding: 20px;
    }

    .week {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        background-color: #d5c7c7;
        margin-bottom: 10px;
        border-radius: 20px;
        padding: 20px;
    }

    .text {
        display: flex;
        flex-direction: column;
    }

    .days {
        background-color: #f0d7d7;
        border-radius: 20px;
    }
    /* Modal Background */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(3px);
      justify-content: center;
      align-items: center;
    }

    /* Modal Box */
    .modal-content {
      background: var(--panel);
      padding: 25px;
      border-radius: 16px;
      width: 380px;
      box-shadow: var(--card-shadow);
      animation: popup .25s ease;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    @keyframes popup {
      from { transform: scale(0.9); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }

    .modal-content h2 {
      margin: 0 0 10px;
    }

    .modal-content input {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
      outline: none;
    }

    .close {
      float: right;
      font-size: 22px;
      cursor: pointer;
      color: #444;
    }


    /* small responsive */
    @media (max-width:1100px){
      .summary{grid-template-columns:repeat(2,1fr)}
      .sidebar{display:none}
    }
    @media (max-width:700px){
      .topbar{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <div class="app">

    <aside class="sidebar">
      <div class="logo">
        <div class="dot">MA</div>
        <div>
          <h1>Murphy-App</h1>
          <div style="font-size:12px;color:rgba(255,255,255,0.6)">Teachers Panel</div>
        </div>
      </div>

      <nav class="nav">
        <a href="/teacher/dashboard">
          <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" color="#979C9E">
            <path d="M21.3612 10.6999L21.3598 10.6985L13.2006 2.53963C12.8528 2.19162 12.3904 2 11.8986 2C11.4067 2 10.9443 2.1915 10.5964 2.53947L2.44139 10.6942C2.43866 10.697 2.43593 10.6999 2.43319 10.7026C1.71898 11.4209 1.72023 12.5864 2.43671 13.3028C2.76401 13.6303 3.19635 13.82 3.65859 13.8398C3.67734 13.8417 3.69629 13.8426 3.71535 13.8426H4.04054V19.8471C4.04054 21.0353 5.00728 22.002 6.19576 22.002H9.38788C9.71143 22.002 9.97388 21.7397 9.97388 21.416V16.7085C9.97388 16.1663 10.4149 15.7253 10.9571 15.7253H12.84C13.3822 15.7253 13.8232 16.1664 13.8232 16.7085V21.416C13.8232 21.7397 14.0855 22.002 14.4092 22.002H17.6013C18.7898 22.002 19.7566 21.0353 19.7566 19.8471V13.8426H20.0581C20.5498 13.8426 21.0122 13.6511 21.3603 13.3032C22.0775 12.5855 22.0778 11.4181 21.3612 10.6999Z" fill="#979C9E"/>
          </svg>
          Home
        </a>
        <a href="/teacher/weeks" class="active">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.42733 1.5C7.22842 1.5 7.03765 1.57902 6.897 1.71967C6.75635 1.86032 6.67733 2.05109 6.67733 2.25V3.2775H5.78258C4.88281 3.27949 4.02056 3.63831 3.38503 4.27525C2.7495 4.91219 2.39258 5.77522 2.39258 6.675V7.4325H19.3051V6.675C19.3051 4.8 17.7826 3.2775 15.9151 3.2775H15.0188V2.25C15.0188 2.05109 14.9398 1.86032 14.7992 1.71967C14.6585 1.57902 14.4677 1.5 14.2688 1.5C14.0699 1.5 13.8792 1.57902 13.7385 1.71967C13.5978 1.86032 13.5188 2.05109 13.5188 2.25V3.2775H8.17733V2.25C8.17733 2.05109 8.09831 1.86032 7.95766 1.71967C7.81701 1.57902 7.62624 1.5 7.42733 1.5ZM2.39258 16.8C2.39258 18.675 3.91508 20.1975 5.78258 20.1975H10.6426C10.2416 19.3407 10.0342 18.406 10.0351 17.46C10.0351 13.86 12.9676 10.9275 16.5751 10.9275C17.5501 10.9275 18.4726 11.145 19.3051 11.5275V8.9325H2.39258V16.8ZM10.8526 11.4825H10.8601C11.2801 11.4825 11.6101 11.82 11.6101 12.2325C11.6101 12.645 11.2801 12.9825 10.8601 12.9825C10.4476 12.9825 10.1101 12.645 10.1101 12.2325C10.1101 11.82 10.4401 11.4825 10.8526 11.4825ZM6.97508 11.4825H6.98258C7.39508 11.4825 7.73258 11.82 7.73258 12.2325C7.73258 12.645 7.39508 12.9825 6.98258 12.9825C6.57008 12.9825 6.23258 12.645 6.23258 12.2325C6.23258 11.82 6.56258 11.4825 6.97508 11.4825ZM6.97508 14.64H6.98258C7.39508 14.64 7.73258 14.9775 7.73258 15.39C7.73258 15.81 7.39508 16.14 6.98258 16.14C6.57008 16.14 6.23258 15.81 6.23258 15.39C6.23258 14.9775 6.56258 14.64 6.97508 14.64Z" fill="#ffcf00"/>
              <path d="M16.5752 12.4275C13.7927 12.4275 11.5352 14.685 11.5352 17.46C11.5352 20.2425 13.7927 22.5 16.5752 22.5C19.3502 22.5 21.6077 20.2425 21.6077 17.46C21.6077 14.685 19.3502 12.4275 16.5752 12.4275ZM18.9227 18.285C18.8177 18.5925 18.5252 18.7875 18.2177 18.7875C18.1332 18.7871 18.0494 18.7719 17.9702 18.7425L16.3277 18.1725C16.0277 18.0675 15.8252 17.7825 15.8252 17.46V15.8175C15.8252 15.405 16.1552 15.0675 16.5752 15.0675C16.9877 15.0675 17.3252 15.405 17.3252 15.8175V16.9275L18.4652 17.325C18.8552 17.46 19.0577 17.8875 18.9227 18.285Z" fill="#ffcf00"/>
          </svg>
          Weeks
        </a>
        <a href="/teacher/exercises">
          <svg width="24" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14.3695 22.4001L12.6978 22.4188C12.6087 22.4199 12.5204 22.4032 12.4379 22.3697C12.3554 22.3361 12.2804 22.2864 12.2175 22.2234C12.1545 22.1604 12.1048 22.0855 12.0712 22.003C12.0376 21.9205 12.0209 21.8321 12.022 21.7431L12.0408 20.0713C12.0428 19.8967 12.113 19.7298 12.2365 19.6063L20.5668 11.2761C20.6288 11.214 20.7024 11.1647 20.7835 11.131C20.8646 11.0974 20.9515 11.0801 21.0393 11.0801C21.1271 11.0801 21.214 11.0974 21.295 11.131C21.3761 11.1647 21.4498 11.214 21.5118 11.2761L23.164 12.9283C23.2262 12.9903 23.2755 13.064 23.3091 13.1451C23.3427 13.2261 23.36 13.3131 23.36 13.4008C23.36 13.4886 23.3427 13.5755 23.3091 13.6566C23.2755 13.7377 23.2262 13.8113 23.164 13.8733L14.8345 22.2043C14.7112 22.3281 14.5442 22.3984 14.3695 22.4001Z" fill="#979C9E"/>
              <path d="M16.051 1.5H6.43604C5.44147 1.5 4.48765 1.89509 3.78438 2.59835C3.08112 3.30161 2.68604 4.25544 2.68604 5.25V18.75C2.68604 19.7446 3.08112 20.6984 3.78438 21.4016C4.48765 22.1049 5.44147 22.5 6.43604 22.5H11.0658C10.9526 22.2596 10.8947 21.9969 10.8963 21.7313L10.915 20.0602C10.9194 19.5911 11.1082 19.1425 11.4408 18.8115L19.7703 10.4827C19.7793 10.4738 19.7905 10.4677 19.7995 10.4587V5.25C19.7997 4.75761 19.7029 4.27001 19.5146 3.81505C19.3263 3.36009 19.0503 2.94668 18.7022 2.59844C18.3541 2.2502 17.9408 1.97395 17.4859 1.78548C17.031 1.59701 16.5434 1.5 16.051 1.5ZM9.91603 17.925H6.27854C6.09951 17.925 5.92783 17.8539 5.80124 17.7273C5.67465 17.6007 5.60354 17.429 5.60354 17.25C5.60354 17.071 5.67465 16.8993 5.80124 16.7727C5.92783 16.6461 6.09951 16.575 6.27854 16.575H9.91603C10.0951 16.575 10.2667 16.6461 10.3933 16.7727C10.5199 16.8993 10.591 17.071 10.591 17.25C10.591 17.429 10.5199 17.6007 10.3933 17.7273C10.2667 17.8539 10.0951 17.925 9.91603 17.925ZM13.9608 12.675H6.27779C6.09876 12.675 5.92708 12.6039 5.80049 12.4773C5.6739 12.3507 5.60279 12.179 5.60279 12C5.60279 11.821 5.6739 11.6493 5.80049 11.5227C5.92708 11.3961 6.09876 11.325 6.27779 11.325H13.9608C14.1398 11.325 14.3115 11.3961 14.4381 11.5227C14.5647 11.6493 14.6358 11.821 14.6358 12C14.6358 12.179 14.5647 12.3507 14.4381 12.4773C14.3115 12.6039 14.1398 12.675 13.9608 12.675ZM16.2108 7.425H6.27779C6.09876 7.425 5.92708 7.35388 5.80049 7.2273C5.6739 7.10071 5.60279 6.92902 5.60279 6.75C5.60279 6.57098 5.6739 6.39929 5.80049 6.2727C5.92708 6.14612 6.09876 6.075 6.27779 6.075H16.2108C16.3898 6.075 16.5615 6.14612 16.6881 6.2727C16.8147 6.39929 16.8858 6.57098 16.8858 6.75C16.8858 6.92902 16.8147 7.10071 16.6881 7.2273C16.5615 7.35388 16.3898 7.425 16.2108 7.425Z" fill="#979C9E"/>
          </svg>
          Exercises
        </a>
      </nav>

      <div class="spacer"></div>
    </aside>

    <main class="main">

      <div class="topbar">
        <div class="profile">
          <div style="text-align:right">
            <div style="font-weight:700">{{ first_name }} {{ last_name }}</div>
            <div style="font-size:12px;color:var(--muted)">{{ type }} Teacher</div>
          </div>
          <div class="avatar">{{ letters }}</div>
        </div>
      </div>

      <div class="days-toggle">
        <div class="days">
          <button class="day-btn active" data-type="Upper-Intermediate">Upper-Intermediate</button>
          <button class="day-btn" data-type="IELTS">IELTS</button>
        </div>
      </div>
      <button class="btn" style="background-color: #b03434;">+ Add Week</button>
      <div class="weeks">

      </div>

      <div id="addWeekModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>

          <h2></h2>

          <label>Week Number</label>
          <input type="number" id="weekNumber" placeholder="Enter week number">

          <label>Week Topic</label>
          <input type="text" id="weekTopic" placeholder="Enter topic">

          <label>Available Keys Count</label>
          <input type="number" id="keys" placeholder="Enter keys">

          <label>Essential From Unit</label>
          <input type="number" id="essentialFromUnit" placeholder="Enter essential from unit">

          <label>Essential To Unit</label>
          <input type="number" id="essentialToUnit" placeholder="Enter essential to unit">

          <label>Murphy From Unit</label>
          <input type="number" id="murphyFromUnit" placeholder="Enter murphy from unit">

          <label>Murphy To Unit</label>
          <input type="number" id="murphyToUnit" placeholder="Enter essential to unit">

          <button class="btn" id="saveWeekBtn" style="margin-top: 10px;">Save</button>
        </div>
      </div>


    </main>
  </div>

  <script>
    async function fetchWeeks(level) {
        const weeks = document.querySelector('.weeks')
        weeks.innerHTML = ''
        const response = await fetch(`/teacher/level-weeks?level=${level}`)
        const result = await response.json()
        for (week of result.weeks) {
            const weekDiv = document.createElement('div');
            weekDiv.classList.add('week')

            const textDiv = document.createElement('div')
            textDiv.classList.add('text')
            const h1 = document.createElement('h1');
            h1.innerHTML = `Week ${week.week_number}`
            const p = document.createElement('p')
            p.innerHTML = week.week_topic

            const weekBtn = document.createElement('button');
            weekBtn.classList.add('btn')
            weekBtn.innerHTML = `Week ${week.week_number}`

            textDiv.appendChild(h1)
            textDiv.appendChild(p)
            weekDiv.appendChild(textDiv)
            weekDiv.appendChild(weekBtn)
            weeks.appendChild(weekDiv)
        }

    }
    fetchWeeks('Upper-Intermediate')
    const buttons = document.querySelectorAll('.day-btn');

    buttons.forEach(btn => {
        btn.addEventListener('click', async () => {
            buttons.forEach(g => g.classList.remove('active'));
            btn.classList.add('active')
            fetchWeeks(btn.textContent)
        });
    });
    const modal = document.getElementById("addWeekModal");
    const openBtn = document.querySelector(".btn[style*='#b03434']");
    const closeBtn = document.querySelector(".close");
    const saveBtn = document.getElementById("saveWeekBtn");

    openBtn.onclick = () => {
        const btnActive = document.querySelector(".day-btn.active")
        const h3 = document.querySelector(".modal h2")
        h3.innerHTML = `Add New Week For ${btnActive.textContent}`
        modal.style.display = "flex";
    }

    closeBtn.onclick = () => {
        modal.style.display = "none";
    }

    window.onclick = (e) => {
        if (e.target === modal) modal.style.display = "none";
    }

    saveBtn.onclick = async () => {
        const level = document.querySelector(".day-btn.active").textContent;
        const number = document.getElementById("weekNumber").value;
        const topic = document.getElementById("weekTopic").value;
        const essentialFromUnit = document.getElementById("essentialFromUnit").value;
        const essentialToUnit = document.getElementById("essentialToUnit").value;
        const murphyFromUnit = document.getElementById("murphyFromUnit").value;
        const murphyToUnit = document.getElementById("murphyToUnit").value;
        const keys = document.getElementById("keys").value;

        if (!number || !topic || !essentialFromUnit || !essentialToUnit || !murphyFromUnit || !murphyToUnit || !keys) {
            alert("Please fill all fields!");
            return;
        }

        const response = await fetch("/teacher/add-week", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({
                week_number: Number(number),
                level: level,
                keys: Number(keys),
                week_topic: topic,
                essential_from_unit: Number(essentialFromUnit),
                essential_to_unit: Number(essentialToUnit),
                murphy_from_unit: Number(murphyFromUnit),
                murphy_to_unit: Number(murphyToUnit)
            })
        });

        const res = await response.json();
        if (res.success) {
            modal.style.display = "none";
            fetchWeeks(level);
        }
    };

  </script>
</body>
</html>

